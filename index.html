<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Updated Cath Lab Inventory Search (v2)</title>
  <style>
    #map-container { position: relative; display: inline-block; }
    #highlight-area { position: absolute; border: 3px solid red; pointer-events: none; display: none; animation: blink 1s infinite; }
    @keyframes blink { 50% { opacity: 0; } }
    #matches button { display: block; margin: 5px 0; }
    #comments { margin-top: 10px; font-style: italic; }
  </style>
</head>
<body>
  <input type="text" id="search" placeholder="Search item...">
  <div id="matches"></div>
  <div id="result"></div>
  <div id="comments"><strong>Comments:</strong> <span id="comment-text">None</span></div>

  <div id="map-container">
    <img id="labMap" src="VGH Cath Lab Room Numbers.jpg" usemap="#image-map" alt="Cath Lab Map">
    <div id="highlight-area"></div>
    <map name="image-map">
      <!-- area definitions unchanged -->
      <!-- ... -->
    </map>
  </div>

  <script>
    const inventoryData = [

  {
    "DESCRIPTION": "Biotronik Torque Wrench",
    "ReferenceNo": "108984",
    "APC_CODE": "?",
    "COMMENT": "S3224"
  },
  {
    "DESCRIPTION": "Medical Adhesive",
    "ReferenceNo": "6517",
    "APC_CODE": "?",
    "COMMENT": "S1474"
  },
  {
    "DESCRIPTION": "Medtronic Lead Adaptor Kit",
    "ReferenceNo": "2872",
    "APC_CODE": "?",
    "COMMENT": "S1838"
  },
  {
    "DESCRIPTION": "Medtronic Lead Splice Kit",
    "ReferenceNo": "5866-9M",
    "APC_CODE": "?",
    "COMMENT": "S1841"
  },
  {
    "DESCRIPTION": "Tunnel Tool",
    "ReferenceNo": "6996T",
    "APC_CODE": "?",
    "COMMENT": "S2222"
  },
  {
    "DESCRIPTION": "Paper Programmer Merlin",
    "ReferenceNo": "3643",
    "APC_CODE": "Abbott Cart",
    "COMMENT": ""
  },
  {
    "DESCRIPTION": "Amplatzer 25 mm PFO Occluder",
    "ReferenceNo": "9-PFO-025",
    "APC_CODE": "ASD/PFO",
    "COMMENT": "S1552"
  },
  {
    "DESCRIPTION": "Amplatzer 30 mm PFO Occluder",
    "ReferenceNo": "9-PFO-030",
    "APC_CODE": "ASD/PFO",
    "COMMENT": "S2838"
  },
  {
    "DESCRIPTION": "Amplatzer 35 mm PFO Occluder",
    "ReferenceNo": "9-PFO-035",
    "APC_CODE": "ASD/PFO",
    "COMMENT": "S1553"
  },
  {
    "DESCRIPTION": "AMPLATZER PLUG III 10X5MM NITINOL",
    "ReferenceNo": "9-APVL3-105",
    "APC_CODE": "ASD/PFO",
    "COMMENT": ""
  },
  {
    "DESCRIPTION": "AMPLATZER PLUG III 12X5MM NITINOL",
    "ReferenceNo": "9-APVL3-125",
    "APC_CODE": "ASD/PFO",
    "COMMENT": ""
  },
  {
    "DESCRIPTION": "AMPLATZER PLUG III 6X3MM NITINOL",
    "ReferenceNo": "9-APVL3-063",
    "APC_CODE": "ASD/PFO",
    "COMMENT": ""
  },
  {
    "DESCRIPTION": "AMPLATZER PLUG III 8X4MM NITINOL",
    "ReferenceNo": "9-APVL3-084",
    "APC_CODE": "ASD/PFO",
    "COMMENT": ""
  },
  {
    "DESCRIPTION": "Amplatzer Sizing Balloon II 24 mm",
    "ReferenceNo": "9-SB-024",
    "APC_CODE": "ASD/PFO",
    "COMMENT": "S1888"
  },
  {
    "DESCRIPTION": "Amplatzer Sizing Balloon II 34 mm",
    "ReferenceNo": "9-SB-034",
    "APC_CODE": "ASD/PFO",
    "COMMENT": "S1889"
  },
  {
    "DESCRIPTION": "Amplatzer Talisman Delivery Sheath 9 FR",
    "ReferenceNo": "9-TDS-09F45-80",
    "APC_CODE": "ASD/PFO",
    "COMMENT": ""
  },
  {
    "DESCRIPTION": "Amplatzer Talisman PFO Occluder 25mm",
    "ReferenceNo": "9-PFO-2518",
    "APC_CODE": "ASD/PFO",
    "COMMENT": ""
  },
  {
    "DESCRIPTION": "Amplatzer Talisman PFO Occluder 30mm",
    "ReferenceNo": "9-PFO-3025",
    "APC_CODE": "ASD/PFO",
    "COMMENT": ""
  },
  {
    "DESCRIPTION": "Amplatzer Talisman PFO Occluder 35mm",
    "ReferenceNo": "9-PFO-3525",
    "APC_CODE": "ASD/PFO",
    "COMMENT": ""
  },
  {
    "DESCRIPTION": "ASD SEPTAL OCCLUDER 10 MM",
    "ReferenceNo": "9-ASD-010",
    "APC_CODE": "ASD/PFO",
    "COMMENT": "S1526"
  },
  {
    "DESCRIPTION": "ASD SEPTAL OCCLUDER 11 MM",
    "ReferenceNo": "9-ASD-011",
    "APC_CODE": "ASD/PFO",
    "COMMENT": "S1527"
  },
  {
    "DESCRIPTION": "ASD SEPTAL OCCLUDER 12 MM",
    "ReferenceNo": "9-ASD-012",
    "APC_CODE": "ASD/PFO",
    "COMMENT": "S1528"
  },
  {
    "DESCRIPTION": "ASD SEPTAL OCCLUDER 13 MM",
    "ReferenceNo": "9-ASD 013",
    "APC_CODE": "ASD/PFO",
    "COMMENT": "S2186"
  },
  {
    "DESCRIPTION": "ASD SEPTAL OCCLUDER 14 MM",
    "ReferenceNo": "9-ASD-014",
    "APC_CODE": "ASD/PFO",
    "COMMENT": "S1530"
  },
  {
    "DESCRIPTION": "ASD SEPTAL OCCLUDER 15 MM",
    "ReferenceNo": "9-ASD 015",
    "APC_CODE": "ASD/PFO",
    "COMMENT": "S2187"
  },
  {
    "DESCRIPTION": "ASD SEPTAL OCCLUDER 16 MM",
    "ReferenceNo": "9-ASD-016",
    "APC_CODE": "ASD/PFO",
    "COMMENT": "S1532"
  },
  {
    "DESCRIPTION": "ASD SEPTAL OCCLUDER 17 MM",
    "ReferenceNo": "9-ASD-017",
    "APC_CODE": "ASD/PFO",
    "COMMENT": "S2188"
  },
  {
    "DESCRIPTION": "ASD SEPTAL OCCLUDER 18 MM",
    "ReferenceNo": "9-ASD-018",
    "APC_CODE": "ASD/PFO",
    "COMMENT": "S2243"
  },
  {
    "DESCRIPTION": "ASD SEPTAL OCCLUDER 19 MM",
    "ReferenceNo": "9-ASD-019",
    "APC_CODE": "ASD/PFO",
    "COMMENT": "S1535"
  },
  {
    "DESCRIPTION": "ASD SEPTAL OCCLUDER 20 MM",
    "ReferenceNo": "9-ASD 020",
    "APC_CODE": "ASD/PFO",
    "COMMENT": "S2205"
  },
  {
    "DESCRIPTION": "ASD SEPTAL OCCLUDER 22 MM",
    "ReferenceNo": "9-ASD-022",
    "APC_CODE": "ASD/PFO",
    "COMMENT": "S1537"
  },
  {
    "DESCRIPTION": "ASD SEPTAL OCCLUDER 24 MM",
    "ReferenceNo": "9-ASD-024",
    "APC_CODE": "ASD/PFO",
    "COMMENT": "S1538"
  },
  {
    "DESCRIPTION": "ASD SEPTAL OCCLUDER 26 MM",
    "ReferenceNo": "9-ASD-026",
    "APC_CODE": "ASD/PFO",
    "COMMENT": "S1539"
  },
  {
    "DESCRIPTION": "ASD SEPTAL OCCLUDER 28 MM",
    "ReferenceNo": "9-ASD-028",
    "APC_CODE": "ASD/PFO",
    "COMMENT": "S1540"
  },
  {
    "DESCRIPTION": "ASD SEPTAL OCCLUDER 30 MM",
    "ReferenceNo": "9-ASD-030",
    "APC_CODE": "ASD/PFO",
    "COMMENT": "S1887"
  },
  {
    "DESCRIPTION": "ASD SEPTAL OCCLUDER 32 MM",
    "ReferenceNo": "9-ASD-032",
    "APC_CODE": "ASD/PFO",
    "COMMENT": "S1541"
  },
  {
    "DESCRIPTION": "ASD SEPTAL OCCLUDER 34 MM",
    "ReferenceNo": "9-ASD-034",
    "APC_CODE": "ASD/PFO",
    "COMMENT": "S2265"
  },
  {
    "DESCRIPTION": "ASD SEPTAL OCCLUDER 36 MM",
    "ReferenceNo": "9-ASD-036",
    "APC_CODE": "ASD/PFO",
    "COMMENT": "S2266"
  },
  {
    "DESCRIPTION": "ASD SEPTAL OCCLUDER 38 MM",
    "ReferenceNo": "9-ASD-038",
    "APC_CODE": "ASD/PFO",
    "COMMENT": "S2257"
  },
  {
    "DESCRIPTION": "ASD SEPTAL OCCLUDER 40 MM",
    "ReferenceNo": "9-ASD-040",
    "APC_CODE": "ASD/PFO",
    "COMMENT": "S2267"
  },
  {
   
  
];
    
const apcCodeMapping = {
  "Cart-A": {top: 142, left: 318, width: 34, height: 20},
  "Cart-B": {top: 110, left: 292, width: 27, height: 52},
  "Cart-C": {top: 63, left: 302, width: 19, height: 30},
  "Cart-D": {top: 62, left: 301, width: 18, height: 32},
  "Cart-E": {top: 65, left: 279, width: 22, height: 13},
  "Cart-F": {top: 65, left: 256, width: 24, height: 13},
  "Cart-G": {top: 61, left: 222, width: 34, height: 17},
  "Cart-H": {top: 108, left: 252, width: 14, height: 15},
  "Cart-I": {top: 123, left: 252, width: 14, height: 12},
  "Cart-J": {top: 134, left: 252, width: 13, height: 14},
  "Cart-K": {top: 149, left: 252, width: 12, height: 13},
  "Cart-L": {top: 107, left: 275, width: 16, height: 55},
  "Cart-M": {top: 108, left: 239, width: 13, height: 12},
  "Cart-N": {top: 122, left: 239, width: 15, height: 14},
  "Cart-O": {top: 135, left: 238, width: 15, height: 12},
  "Cart-P": {top: 147, left: 239, width: 12, height: 16},
  "Cart-Q": {top: 145, left: 215, width: 11, height: 15},
  "Cart-R": {top: 127, left: 215, width: 11, height: 17},
  "Cart-S": {top: 108, left: 215, width: 11, height: 19},
  "Cart-T": {top: 415, left: 175, width: 13, height: 22},
  "Cart-U": {top: 439, left: 175, width: 14, height: 19},
  "Cart-V": {top: 458, left: 175, width: 16, height: 18},
  "Pacer":  {top: 391, left: 119, width: 69, height: 23},
  "TAVI-1": {top: 120, left: 125, width: 19, height: 23},
  "TAVI-2": {top: 5, left: 46, width: 30, height: 45},
  "Lab2": {top: 254, left: 122, width: 24, height: 27},
  "G549":  {top: 112, left: 175, width: 39, height: 33},
  "G550A": {top: 66, left: 172, width: 47, height: 40},
  "CRU":   {top: 152, left: 176, width: 35, height: 54},
  "Dirty": {top: 334, left: 345, width: 83, height: 35},
};
// https://www.image-map.net/ // 
//coords="400,250,520,370"
//left = 400, top = 250, width = 520-400 = 120, height = 370-250 = 120
//    "334,345,251,310" 
  

    const searchInput = document.getElementById('search');
    const matchesDiv = document.getElementById('matches');
    const resultDiv = document.getElementById('result');
    const commentText = document.getElementById('comment-text');
    const highlightArea = document.getElementById('highlight-area');

    searchInput.addEventListener('input', () => {
      const query = searchInput.value.trim().toLowerCase();
      const results = inventoryData.filter(item => {
  const desc = (item.DESCRIPTION || '').toString().toLowerCase();
  const ref  = (item.ReferenceNo || '').toString().toLowerCase();
  const apc  = (item.APC_CODE || '').toString().toLowerCase();
  return desc.includes(query) || ref.includes(query) || apc.includes(query);
});
matchesDiv.innerHTML = '<strong>Matching Items:</strong><br>';
      highlightArea.style.display = 'none';

      if (results.length) {
        results.forEach(result => {
          const button = document.createElement('button');
          button.textContent = `${result.DESCRIPTION} (Ref: ${result.ReferenceNo})`;
          button.addEventListener('click', () => {
            resultDiv.innerHTML = `<strong>Description:</strong> ${result.DESCRIPTION}<br>
                                   <strong>Reference No:</strong> ${result.ReferenceNo}<br>
                                   <strong>Location:</strong> ${result.APC_CODE}`;
            commentText.textContent = result.COMMENT || 'No comments.';
            const coords = apcCodeMapping[result.APC_CODE];
            if (coords) {
              highlightArea.style.top = coords.top + 'px';
              highlightArea.style.left = coords.left + 'px';
              highlightArea.style.width = coords.width + 'px';
              highlightArea.style.height = coords.height + 'px';
              highlightArea.style.display = 'block';
            }
          });
          matchesDiv.appendChild(button);
        });
      } else {
        matchesDiv.innerHTML = 'Item not found';
        resultDiv.innerHTML = '';
        commentText.textContent = 'None';
      }
    });
  </script>
</body>
</html>
